---
import type { InferGetStaticParamsType } from "astro";
import Layout from "@layouts/Layout.astro";
import { fetchBooks, fetchBook } from "@data/api";
import type { Book } from "@data/api";

export async function getStaticPaths() {
  const books = await fetchBooks();
  return books?.map((book: Book) => ({
    params: { slug: book.slug },
    props: { book },
  }));
}

type Params = InferGetStaticParamsType<typeof getStaticPaths>;
const { slug } = Astro.params as Params;
const { book } = Astro.props as { book: Book };

// const book = await fetchBook(slug);
console.log(book);
---

<Layout title="Digital Library">
  <main>
    <h1>{book?.title}</h1>
  </main>
</Layout>
